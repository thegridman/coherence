<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Fri Dec 09 14:39:03 UTC 2022 -->
<title>VersionAwareMapListener (Java API Reference for Oracle® Coherence Community Edition)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-12-09">
<meta name="description" content="declaration: package: com.tangosol.net.partition, interface: VersionAwareMapListener">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><b>Java API Reference for Oracle® Coherence Community Edition<br>       (22.09.1)</b></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/VersionAwareMapListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.tangosol.net.partition</a></div>
<h1 title="Interface VersionAwareMapListener" class="title">Interface VersionAwareMapListener&lt;K,<wbr>V&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EventListener.html" title="class or interface in java.util" class="external-link">EventListener</a></code>, <code><a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a>&lt;K,<wbr>V&gt;</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">VersionAwareMapListener&lt;K,<wbr>V&gt;</span><span class="extends-implements">
extends <a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a>&lt;K,<wbr>V&gt;</span></div>
<div class="block">Direct implementations of this interface are generally considered advanced
 use cases, such as handling event receiver (client process) restarts. Commonly
 <a href="../../util/MapListener.html" title="interface in com.tangosol.util"><code>MapListener</code></a> implementations simply need to suggest that they are
 <a href="../../util/MapListener.html#VERSION_AWARE"><code>version aware</code></a>. Coherence will automatically
 create an implementation of this interface and track partition versions for
 relevant partitions and re-register to replay missed events. A more detailed
 description of the semantics for implementors of this interface is described
 below.
 <p>
 Implementations of this interface suggest that they are aware of event versions
 (<a href="../../util/MapEvent.html#getPartition()"><code>partition</code></a> &amp;
 <a href="../../util/MapEvent.html#getVersion()"><code>version</code></a>), such that this
 implementation can be asked for all partition version that were last received
 or is interested in receiving. Additionally, there is a convenient <a href="#getCurrentVersion()"><code>current version</code></a> method, which
 is generally applicable when there is a single partition being tracked.
 <p>
 The primary reason to be version aware is to allow the receiver/client to track the
 last event it received. If the receiver ever becomes disconnected from the
 source of events, it allows the receiver to ask the source for all events
 that were missed. The source may replay:
 <ol>
     <li>all the events from the last event received to the latest</li>
     <li>only the events that were retained, if some were purged</li>
     <li>an event representing the latest modification</li>
     <li>no events if the source does not support event history</li>
 </ol>
 There are several reasons why the source of events (ownership enabled members)
 may become disconnected from the receiver of events.
 <ol>
     <li><b>Network disruption</b> - event receiver becomes disconnected from
     the source / the rest of the cluster</li>
     <li><b>Proxy (Extend/gRPC) disruption</b> - a proxy the client was connected
     to dies and therefore reconnects to a different proxy</li>
     <li><b>Client death</b> - client process dies but the same logical process
     restarts</li>
 </ol>
 For cases 1 &amp; 2, having to "reconnect" to the source is automatically handled
 by Coherence, thus this interface allows Coherence to which version for
 each partition was last read and request the replay with the aforementioned
 considerations.
 <p>
 For the 3rd case it requires a call to <a href="../../util/ObservableMap.html#addMapListener(com.tangosol.util.MapListener)"><code>addMapListener</code></a> passing an implementation of this interface that returns the
 relevant versions. Clearly for the 3rd case it requires the client to persist
 the partition version information such that it can be recovered and replay
 requested from the event source.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>Coherence 21.06</dd>
<dt>Author:</dt>
<dd>hr  2021.01.29</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final long</code></div>
<div class="col-second even-row-color"><code><a href="#ALL" class="member-name-link">ALL</a></code></div>
<div class="col-last even-row-color">
<div class="block">A constant that suggests to an event source to send all known versions
 (subject to the event source's retention policy) and all future versions.</div>
</div>
<div class="col-first odd-row-color"><code>static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#HEAD" class="member-name-link">HEAD</a></code></div>
<div class="col-last odd-row-color">
<div class="block">A constant that suggests to an event source to send all future events.</div>
</div>
<div class="col-first even-row-color"><code>static final long</code></div>
<div class="col-second even-row-color"><code><a href="#PRIMING" class="member-name-link">PRIMING</a></code></div>
<div class="col-last even-row-color">
<div class="block">A constant that suggests to an event source to send the current version
 and all future versions.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-com.tangosol.util.MapListener">Fields inherited from interface&nbsp;com.tangosol.util.<a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a></h3>
<code><a href="../../util/MapListener.html#ASYNCHRONOUS">ASYNCHRONOUS</a>, <a href="../../util/MapListener.html#SYNCHRONOUS">SYNCHRONOUS</a>, <a href="../../util/MapListener.html#VERSION_AWARE">VERSION_AWARE</a></code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#getCurrentVersion()" class="member-name-link">getCurrentVersion</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">A convenience method that returns a single version with the same rules
 as described <a href="#getVersions()"><code>here</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="VersionedPartitions.html" title="interface in com.tangosol.net.partition">VersionedPartitions</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getVersions()" class="member-name-link">getVersions</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Return a data structure that holds a mapping of <code>partition -&gt; version</code>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-com.tangosol.util.MapListener">Methods inherited from interface&nbsp;com.tangosol.util.<a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a></h3>
<code><a href="../../util/MapListener.html#characteristics()">characteristics</a>, <a href="../../util/MapListener.html#entryDeleted(com.tangosol.util.MapEvent)">entryDeleted</a>, <a href="../../util/MapListener.html#entryInserted(com.tangosol.util.MapEvent)">entryInserted</a>, <a href="../../util/MapListener.html#entryUpdated(com.tangosol.util.MapEvent)">entryUpdated</a>, <a href="../../util/MapListener.html#isAsynchronous()">isAsynchronous</a>, <a href="../../util/MapListener.html#isSynchronous()">isSynchronous</a>, <a href="../../util/MapListener.html#isVersionAware()">isVersionAware</a>, <a href="../../util/MapListener.html#synchronous()">synchronous</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="HEAD">
<h3>HEAD</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">HEAD</span></div>
<div class="block">A constant that suggests to an event source to send all future events.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.tangosol.net.partition.VersionAwareMapListener.HEAD">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PRIMING">
<h3>PRIMING</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">PRIMING</span></div>
<div class="block">A constant that suggests to an event source to send the current version
 and all future versions.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.tangosol.net.partition.VersionAwareMapListener.PRIMING">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ALL">
<h3>ALL</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">ALL</span></div>
<div class="block">A constant that suggests to an event source to send all known versions
 (subject to the event source's retention policy) and all future versions.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.tangosol.net.partition.VersionAwareMapListener.ALL">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getVersions()">
<h3>getVersions</h3>
<div class="member-signature"><span class="return-type"><a href="VersionedPartitions.html" title="interface in com.tangosol.net.partition">VersionedPartitions</a></span>&nbsp;<span class="element-name">getVersions</span>()</div>
<div class="block">Return a data structure that holds a mapping of <code>partition -&gt; version</code>.
 The absence of a partition suggests no interest in receiving events emanating
 from said partition.
 <p>
 The version represents the last version that was read. If this listener
 is being registered (either for the first or n<sup>th</sup> time) this
 method will be called and passed to the source to allow any missed events
 to be replayed. Additionally, implementations can return any of the following
 formally defined constants (the behavior is performed in addition to
 the registration of this listener with the source):
 <ol>
     <li><a href="#HEAD"><code>HEAD</code></a> - send all future versions</li>
     <li><a href="#PRIMING"><code>PRIMING</code></a> - send current and all future versions</li>
     <li><a href="#ALL"><code>ALL</code></a> - send all known versions</li>
 </ol>
 <p>
 A listener is always registered under the context of a key or a filter.
 A key maps to a single partition while a filter generally maps to all
 partitions, therefore the registrations are either targeted to a single
 node or multiple nodes respectively.
 <p>
 When replaying events if the listener was registered under the context
 of a key (or many keys) the events that are replayed will only be for
 said key(s) and not other keys owned by the same partition. Conversely,
 when events are replayed for filter-based registrations events relating
 to <b>all</b> keys for the returned partitions are replayed. In both cases,
 only future events for the given partition versions are replayed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a data structure that holds a mapping of <code>partition -&gt; version</code>
         representing the last received versions thus can be sent to the
         source to replay missing events</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentVersion()">
<h3>getCurrentVersion</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getCurrentVersion</span>()</div>
<div class="block">A convenience method that returns a single version with the same rules
 as described <a href="#getVersions()"><code>here</code></a>. Callers of this method can generally
 assume the partition(s) this version relates to. Often this is due to
 the listener being registered with a key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the last version received</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><script>                       if (typeof useModuleDirectories !== 'undefined') {                         useModuleDirectories = false;                       }                       </script></small></p>
</footer>
</div>
</div>
</body>
</html>
